# AWS S3 Controller 설계 문서

## 아키텍처 개요

AWS S3 Controller는 다음과 같은 모듈식 구조로 설계되었습니다:

### 핵심 컴포넌트

1. **Scanner 모듈** (`s3_scanner.py`)
   - S3 버킷과 로컬 디렉토리 내 파일 검색 기능
   - 정규식 패턴 매칭을 통한 유연한 검색
   - 검색 결과 포맷팅 옵션 제공

2. **Transfer 모듈** (`s3_transfer.py`)
   - S3와 로컬 시스템 간 파일 전송
   - S3 버킷 간 파일 복사 및 이동
   - 대량 파일 처리 지원

3. **DataFrame Reader 모듈** (`s3_dataframe_reader.py`)
   - CSV 및 Excel 파일을 pandas DataFrame으로 변환
   - 다양한 파일 포맷 지원
   - 효율적인 데이터 처리

4. **Structure 모듈** (`s3_structure.py`)
   - S3 버킷 구조 관리
   - 가상 디렉토리 생성 및 관리
   - 버킷 구조화 기능

5. **Special Operations 모듈** (`s3_special_operations.py`)
   - 특수 목적 기능 구현
   - 시계열 데이터 처리
   - 사용자 정의 작업 처리

### 설계 원칙

1. **단일 책임 원칙 (SRP)**
   - 각 모듈은 하나의 핵심 책임만 가짐
   - 기능별로 명확히 분리된 구조
   - 유지보수성 향상

2. **인터페이스 일관성**
   - 일관된 함수 시그니처
   - 표준화된 에러 처리
   - 직관적인 API 설계

3. **확장성**
   - 모듈식 구조로 새로운 기능 추가 용이
   - 기존 기능 수정 없이 새로운 기능 통합 가능
   - 플러그인 형태의 확장 지원

4. **신뢰성**
   - 철저한 에러 처리
   - 트랜잭션 안정성 보장
   - 실패 복구 메커니즘

## 기술 스택

- **Python 3.7+**: 주요 개발 언어
- **boto3**: AWS SDK for Python
- **pandas**: 데이터 처리
- **python-dotenv**: 환경 변수 관리
- **xlrd**: Excel 파일 처리

## 데이터 흐름

1. **파일 검색 프로세스**
```
사용자 요청 → Scanner 모듈 → S3/로컬 검색 → 결과 반환
```

2. **파일 전송 프로세스**
```
전송 요청 → Transfer 모듈 → 소스 확인 → 대상 확인 → 전송 실행 → 결과 확인
```

3. **데이터 읽기 프로세스**
```
파일 요청 → DataFrame Reader → 파일 다운로드 → 데이터 변환 → DataFrame 반환
```

## 보안 고려사항

1. AWS 자격 증명 관리
   - 환경 변수 사용
   - 보안 키 분리

2. 접근 제어
   - 최소 권한 원칙
   - 역할 기반 접근 제어

3. 데이터 보안
   - 전송 중 암호화
   - 저장 데이터 암호화

## 향후 개선 계획

1. 성능 최적화
   - 대용량 파일 처리 개선
   - 병렬 처리 구현

2. 기능 확장
   - 추가 파일 형식 지원
   - 고급 검색 기능

3. 모니터링
   - 로깅 시스템 구현
   - 성능 메트릭 수집
